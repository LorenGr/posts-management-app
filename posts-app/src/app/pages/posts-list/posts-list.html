<div class="flex flex-col h-screen">
    <div class="flex p-9 justify-center items-center text-white border-b-4 border-gray-700 mx-6">
        <div class="flex-1 flex items-center">
            <h1 class="bg-gray-800 text-white text-lg">Posts
            </h1>
            <app-create-post-button (onCreate)="createPost($event)"></app-create-post-button>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
            class="size-6 mr-3 text-gray-300">
            <path stroke-linecap="round" stroke-linejoin="round"
                d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
        </svg>

        <input type="search" class="my-field h-9" placeholder="Search" [ngModel]="searchTerm$ | async"
            (ngModelChange)="onSearchChange($event)" />

        @if (searchTerm$ | async) {
        <button class="absolute right-11" matSuffix mat-icon-button aria-label="Clear" (click)="onSearchChange('')">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
            </svg>
        </button>
        }
        <app-color-selector></app-color-selector>


    </div>
    <div class="flex-1 p-4 overflow-y-auto">
        <div class="grid gap-0 overflow-hidden">
            <div *ngFor="let post of filteredPosts$ | async"
                class="border-gray-700 hover:bg-gray-700 hover:bg-opacity-30 border-l-gray-800 hover:border-l-primary border-l-4 border-b p-4 cursor-pointer"
                (click)="navigateToPost(post.id)">
                <h3 class="font-bold text-sm text-primary">{{ post.title }}</h3>
                <p class="text-gray-500">{{ post.body | truncate:50 }}</p>
            </div>
        </div>
    </div>
    <div class="sticky bottom-0">
        <mat-paginator [length]="totalPosts$ | async" [pageSize]="limit" [pageIndex]="currentPage"
            (page)="onPageChange($event)"></mat-paginator>
    </div>
</div>